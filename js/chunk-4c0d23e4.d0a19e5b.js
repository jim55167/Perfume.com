(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c0d23e4"],{c12c:function(t,a,e){"use strict";var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"goTop",class:{btnFlag:t.btnFlag},on:{click:function(a){return a.preventDefault(),t.goTop(a)}}})])},s=[],o={name:"goTop",data:function(){return{btnFlag:!0}},methods:{goTop:function(){window.scrollTo({top:0})}},mounted:function(){var t=this;document.body.onscroll=function(){document.documentElement.scrollTop>200?t.btnFlag=!0:t.btnFlag=!1}}},c=o,i=e("2877"),r=Object(i["a"])(c,n,s,!1,null,null,null);a["a"]=r.exports},d7f7:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"item-wrap"},[e("Loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("table",{staticClass:"table"},[t._m(0),e("tbody",{staticClass:"cart-items"},t._l(t.cart.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle d-md-table-cell"},[e("div",{staticClass:"product-preview d-md-block",style:{backgroundImage:"url("+a.product.imageUrl+")"}})]),e("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(a.product.title)+" "),a.coupon?e("div",{staticClass:"text-danger"},[t._v("已套用優惠券")]):t._e()]),e("td",{staticClass:"align-middle d-sm-table-cell d-none qty-adjust"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"item.qty"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"qty",e.target.multiple?n:n[0])},function(e){return t.updateCart(a.id,a.product.id,a.qty)}]}},t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])})),0),t._v(" "+t._s(a.product.unit)+" ")]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(t._f("currency")(a.total))+" "),a.coupon?e("div",{staticClass:"text-danger"},[t._v(t._s(t._f("currency")(a.final_total)))]):t._e()]),e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.removeCart(a.id)}}},[e("i",{staticClass:"far fa-trash-alt"})])])])})),0),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?e("tr",[e("td",{staticClass:"text-right",staticStyle:{color:"red"},attrs:{colspan:"3"}},[t._v("折扣價")]),e("td",{staticClass:"text-right",staticStyle:{color:"red"}},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("input",{staticClass:"btn btn-primary",attrs:{type:"button",value:"套用優惠碼"},on:{click:t.addCouponCode}}),e("div",{staticClass:"coupon-message"},[t._v(t._s(this.focus))])])]),e("div",{staticClass:"d-flex justify-content-between mt-4 step-control"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/home"}},[t._v("返回商場")]),t.nextPage?e("router-link",{staticClass:"btn btn-danger",attrs:{to:"front_order"}},[t._v("下一步")]):t._e()],1),e("GoTop")],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"d-md-table-cell"},[t._v("縮圖")]),e("th",[t._v("品項")]),e("th",{staticClass:"d-sm-table-cell d-none",attrs:{width:"120px"}},[t._v("數量")]),e("th",{attrs:{width:"25%"}},[t._v("總計")]),e("th",{attrs:{width:"60px"}},[t._v("刪除")])])])}],o=(e("99af"),e("c12c")),c={name:"FrontCartItems",data:function(){return{coupon_code:"",focus:""}},methods:{updateCart:function(t,a,e){this.$store.dispatch("updateCart",{id:t,productId:a,qty:e})},getCart:function(){this.$store.dispatch("getCart")},removeCart:function(t){this.$store.dispatch("removeCart",t)},addCouponCode:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("jim12345","/coupon"),e={code:this.coupon_code};this.$store.dispatch("updateLoading",!0),this.$http.post(a,{data:e}).then((function(a){t.focus=a.data.message,t.getCart(),t.$store.dispatch("updateLoading",!1)}))}},computed:{cart:function(){return this.$store.state.cart},isLoading:function(){return this.$store.state.isLoading},nextPage:function(){return 0!==this.cart.carts}},created:function(){this.getCart()},components:{GoTop:o["a"]}},i=c,r=e("2877"),l=Object(r["a"])(i,n,s,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-4c0d23e4.d0a19e5b.js.map